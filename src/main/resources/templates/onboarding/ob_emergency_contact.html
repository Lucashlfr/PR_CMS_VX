<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="de">
<head th:insert="~{fragments :: html_head}"></head>
<body class="nav-fixed">
<nav th:insert="~{fragments :: topnav}"></nav>
<div id="layoutSidenav">
    <div id="layoutSidenav_nav" th:insert="~{fragments :: sidebar}"></div>
    <div id="layoutSidenav_content">
        <main>
            <header class="page-header page-header-dark pb-15 bg-img-cover"
                    style="background-image: url('https://messdiener-knittelsheim.de/wp-content/uploads/2025/01/Handabdruck-scannen-scaled.jpg')">
                <div class="container-xl px-4">
                    <div class="page-header-content pt-4">
                        <h1 class="page-header-title mt-4"
                            th:text="'CMS Onboarding'">
                        </h1>
                        <div class="page-header-subtitle">Bei Fragen wende dich gerne direkt an Lucas!
                        </div>
                    </div>
                </div>
            </header>
            <!-- Main page content-->
            <form class="needs-validation" novalidate th:action="@{/onboarding/check/submit}" th:method="post">
                <!-- Main page content-->
                <div class="container-xl px-4 mt-n10" id="content">
                    <div class="card mb-3">
                        <div class="card-body p-5">
                            <div class="row align-items-center justify-content-between">
                                <div class="col">
                                    <h1 style="font-size: 35px" class="text-info">Notfallkontakt</h1>
                                    <h4 class="lead mb-4">Bitte wende dich bei Fragen direkt an Lucas!</h4>
                                    <p>Liebe Messdienerinnen und Messdiener</p>
                                    <p>Hinterlegt bitte in diesem Formular die Kontaktdaten euerer Eltern</p>

                                </div>
                                <div class="col-xl-3 d-none d-lg-block mt-xxl-n4 text-center"><img
                                        class="img-fluid px-xl-4 mt-xxl-n5" style="max-width: 400px!important;"
                                        th:src="@{/dist/assets/img/illustrations/Security-rafiki.svg}"/>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card card-header-actions">
                        <div class="card-header ">
                            Notfallkontakte
                            <a class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#create">Kontakt anlegen</a>
                        </div>
                        <div class="card-body">
                            <table class="table table-bordered">
                                <thead>
                                <tr>
                                    <th>Vorname</th>
                                    <th>Nachname</th>
                                    <th>Telefonische Erreichbarkeit</th>
                                    <th>Email</th>
                                    <th></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="contact: ${contactList}">
                                    <td th:text="${contact.getFirstName()}"></td>
                                    <td th:text="${contact.getLastName()}"></td>
                                    <td th:text="${contact.getPhoneNumber()}"></td>
                                    <td th:text="${contact.getMail()}"></td>
                                    <td><a th:href="'/onboarding/contact/delete?id=' + ${contact.getContactId()}">Löschen</a></td>
                                </tr>
                                <tr th:if="${contactList.size() == 0}">
                                    <td colspan="5" class="text-center bg-danger-soft">Kein Kontakt hinterlegt</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <br>

                    <div class="d-grid">

                        <a class="btn btn-primary btn-block btn-xl" type="button" href="/onboarding/emergency_contact/submit">Speichern</a>

                    </div>

                </div>
            </form>
        </main>
        <footer th:insert="~{fragments :: footer}"></footer>
    </div>
</div>
<div th:insert="~{fragments :: script}"></div>
<form class="needs-validation" novalidate th:action="@{/onboarding/emergency_contact/create}" th:method="post">
    <!-- The Modal -->
    <div class="modal fade " id="create" data-bs-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Notfallkontakt anlegen</h4>
                    <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-floating mb-3">
                        <select class="form-select" id="type" name="type" required>
                            <option></option>
                            <option>Erziehungsberechtigte Person</option>
                            <option>Großeltern / verwandte Person</option>
                            <option>Sonstiges</option>
                        </select>
                        <label for="type" class="form-label">Typ auswählen:</label>
                    </div>

                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="firstname" placeholder="Enter firstname" name="firstname" required>
                        <label for="firstname">Vorname</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="lastname" placeholder="Enter lastname" name="lastname" required>
                        <label for="lastname">Nachname</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="phone" placeholder="Enter phone" name="phone" required>
                        <label for="phone">Telefon-Nr.</label>
                    </div>
                    <div class="form-floating">
                        <input type="text" class="form-control" id="email" placeholder="Enter email" name="email">
                        <label for="email">Email</label>
                    </div>
                </div>
                <div class="modal-footer d-flex gap-2">
                    <button type="reset" class="btn btn-danger flex-fill" data-bs-dismiss="modal">Abbrechen</button>
                    <button type="submit" class="btn btn-success flex-fill">Speichern</button>

                </div>
            </div>
        </div>
    </div>
</form>
<script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (function () {
        'use strict'

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.querySelectorAll('.needs-validation')

        // Loop over them and prevent submission
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }

                    form.classList.add('was-validated')
                }, false)
            })
    })()
</script>
</body>
</html>
